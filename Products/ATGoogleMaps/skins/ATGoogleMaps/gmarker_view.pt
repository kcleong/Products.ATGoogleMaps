<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="googlemaps">

<head>
  <metal:block fill-slot="javascript_head_slot"
               tal:condition="context/point | nothing">
    <script type="text/javascript" src=""
            tal:attributes="src string:http://maps.google.com/maps?file=api&v=2&key=${context/portal_properties/gmap_properties/api_key}">
    </script>

    <script type="text/javascript" src=""
            tal:attributes="src string:$portal_url/atgooglemaps.js">
    </script>

    <span tal:replace="structure context/gmarker_map" />
  </metal:block>
</head>

<body>

<metal:main fill-slot="main">
  <tal:main-macro metal:define-macro="main">

    <div metal:use-macro="context/document_actions/macros/document_actions">
      Document actions (print, sendto etc)
    </div>

    <h1 tal:content="context/pretty_title_or_id" class="documentFirstHeading">
      Title or id
    </h1>

    <div metal:use-macro="context/document_byline/macros/byline">
      Get the byline - contains details about author and modification date.
    </div>

    <div style="float: right; margin: 5px;"
         tal:condition="context/point | nothing"
	 tal:define="server context/server | context/aq_parent/server | string:maps.google.com">
      <div id="map" style="width: 300px; height: 150px;"></div>
      <a href=""
         tal:attributes="href string:http://$server?ll=${context/point/latitude},${context/point/longitude}"
         i18n:translate="label_larger_map">
        View larger map
      </a>
    </div>

    <h3 tal:content="context/tab1"
	tal:condition="context/tab1">Tab #1 title</h3>

    <img src=""
         tal:condition="context/imageurl"
         tal:attributes="src context/imageurl" />

    <metal:gmarker_macro define-macro="gmarker">
      <div class="documentDescription"
	   tal:content="context/Description"
	   tal:condition="context/Description">
        Description
      </div>

      <div tal:condition="context/address">
	<label i18n:translate="label_address">Address</label>
	<span tal:replace="context/address" />
      </div>

      <div tal:condition="context/phone">
	<label i18n:translate="label_phone">Phone</label>
	<span tal:replace="context/phone" />
      </div>
    </metal:gmarker_macro>

    <div tal:condition="context/url">
      <label i18n:translate="URL">URL</label>
      <a href=""
	 tal:content="context/url"
         tal:attributes="href context/url">
	Link
      </a>
    </div>

    <br style="clear: both;"/>

    <div tal:condition="context/getText"
         tal:content="structure context/getText">
       Body Text
    </div>

    <h3 tal:content="context/tab2"
	tal:condition="context/tab2">Tab #2 title</h3>

    <div tal:condition="context/detail"
         tal:content="structure context/getDetail">
       Detail Text
    </div>

    <div metal:use-macro="context/document_relateditems/macros/relatedItems">
      show related items if they exist
    </div>

  </tal:main-macro>
</metal:main>

</body>
</html>
